<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>MyCirkle Loyalty Program</title>
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    }
    .fade { animation: fadeInOut 3s ease-in-out; }
    @keyframes fadeInOut {
      0%,100% { opacity: 0; }
      50% { opacity: 1; }
    }
    .flip-card {
      background-color: transparent;
      width: 300px;
      height: 180px;
      perspective: 1000px;
    }
    .flip-card-inner {
      position: relative;
      width: 100%;
      height: 100%;
      transition: transform 0.6s;
      transform-style: preserve-3d;
    }
    .flip-card:hover .flip-card-inner {
      transform: rotateY(180deg);
    }
    .flip-card-front, .flip-card-back {
      position: absolute;
      width: 100%;
      height: 100%;
      backface-visibility: hidden;
      border-radius: 20px;
      padding: 20px;
    }
    .flip-card-front {
      background: #1f1f1f;
      color: white;
    }
    .flip-card-back {
      background: #333;
      color: white;
      transform: rotateY(180deg);
    }
    /* Styling for confetti */
    .confetti { 
      animation: confettiAnimation 2s forwards;
    }
    @keyframes confettiAnimation {
      0% { transform: scale(0); opacity: 1; }
      100% { transform: scale(1); opacity: 0; }
    }
  </style>
</head>
<body class="bg-black text-white flex flex-col items-center justify-center min-h-screen">
  <div id="app" class="w-full max-w-2xl p-4 text-center">
    <!-- Sign Up, Login, and Onboarding -->
    <div id="start" class="space-y-4">
      <h1 class="text-4xl font-bold">Welcome to MyCirkle</h1>
      <button onclick="goToSignUp()" class="bg-blue-500 hover:bg-blue-700 text-white py-2 px-4 rounded">Sign Up</button>
      <button onclick="goToLogin()" class="bg-gray-700 hover:bg-gray-900 text-white py-2 px-4 rounded">Login</button>
    </div>

    <!-- Sign Up Form -->
    <div id="signup" class="hidden space-y-4">
      <div id="signup-step-1">
        <p>Enter Username:</p>
        <input id="username" type="text" class="text-black w-full p-2 rounded">
        <button onclick="nextSignupStep(2)" class="mt-2 bg-blue-500 text-white px-4 py-2 rounded">Continue</button>
      </div>
      <div id="signup-step-2" class="hidden">
        <p>Enter Email:</p>
        <input id="email" type="email" class="text-black w-full p-2 rounded">
        <button onclick="nextSignupStep(3)" class="mt-2 bg-blue-500 text-white px-4 py-2 rounded">Continue</button>
      </div>
      <div id="signup-step-3" class="hidden">
        <p>Create Password:</p>
        <input id="password" type="password" class="text-black w-full p-2 rounded">
        <button onclick="completeSignup()" class="mt-2 bg-blue-500 text-white px-4 py-2 rounded">Sign Up</button>
      </div>
    </div>

    <!-- Onboarding -->
    <div id="onboarding" class="hidden fade text-xl">
      <p id="onboarding-text"></p>
    </div>

    <!-- Dashboard -->
    <div id="dashboard" class="hidden grid grid-cols-2 gap-4 text-center">
      <button onclick="goTo('rewards')" class="bg-gray-800 p-4 rounded-2xl">Rewards and Points</button>
      <button onclick="goTo('faq')" class="bg-gray-800 p-4 rounded-2xl">FAQ</button>
      <button onclick="goTo('products')" class="bg-gray-800 p-4 rounded-2xl">My Products</button>
      <button onclick="goTo('account')" class="bg-gray-800 p-4 rounded-2xl">Account Details</button>
      <button onclick="goTo('card')" class="bg-gray-800 p-4 rounded-2xl">Loyalty Card</button>
      <button onclick="logOut()" class="col-span-2 bg-red-600 mt-4 p-2 rounded">Log Out</button>
    </div>

    <!-- Rewards Page -->
    <div id="rewards" class="hidden text-center">
      <button onclick="goTo('dashboard')" class="bg-gray-800 p-2 rounded mb-4">Back</button>
      <h2 class="text-2xl font-bold mb-4">Your Points: <span id="user-points">1200</span></h2>
      <div id="chart" class="mb-4"></div>
      <input type="number" id="target-input" class="text-black w-48 p-2 rounded" placeholder="Set New Target">
      <button onclick="setTarget()" class="mt-2 bg-blue-500 text-white px-4 py-2 rounded">Set Target</button>
      <div id="confetti" class="hidden mt-4 text-green-400 font-bold">You've just set a new target!</div>
      <div class="mt-6 space-y-2">
        <div class="bg-gray-700 p-4 rounded">
          <h3>Reward 1</h3>
          <button onclick="redeemReward(1)" class="bg-blue-500 text-white p-2 rounded">Redeem</button>
        </div>
        <div class="bg-gray-700 p-4 rounded">
          <h3>Reward 2</h3>
          <button onclick="redeemReward(2)" class="bg-blue-500 text-white p-2 rounded">Redeem</button>
        </div>
        <div class="bg-gray-700 p-4 rounded">
          <h3>Reward 3</h3>
          <button onclick="redeemReward(3)" class="bg-blue-500 text-white p-2 rounded">Redeem</button>
        </div>
      </div>
    </div>

    <!-- FAQ, Products, Account Details, and Loyalty Card pages go here (same as above) -->

  </div>

  <script>
    let userPoints = 1200;

    // Chart.js setup
    let ctx = document.getElementById('chart').getContext('2d');
    let chart = new Chart(ctx, {
      type: 'pie',
      data: {
        labels: ['Used', 'Available'],
        datasets: [{
          label: 'My Points',
          data: [200, userPoints - 200],
          backgroundColor: ['#ff6b6b', '#4caf50'],
        }],
      },
      options: {
        responsive: true,
        plugins: {
          legend: {
            position: 'top',
          },
        },
      },
    });

    // Set target function
    function setTarget() {
      const target = document.getElementById('target-input').value;
      if (target) {
        userPoints = target;
        chart.data.datasets[0].data[1] = userPoints - 200;  // Update available points
        chart.update();
        document.getElementById('confetti').classList.remove('hidden');
      }
    }

    // Reward redemption logic
    function redeemReward(rewardId) {
      userPoints -= 100;  // Deduct points for redemption
      chart.data.datasets[0].data[1] = userPoints - 200;
      chart.update();
      alert('Reward Redeemed! Points deducted.');
    }

    // Navigation logic for pages
    function goTo(page) {
      document.getElementById('dashboard').classList.add('hidden');
      document.getElementById('rewards').classList.add('hidden');
      document.getElementById('faq').classList.add('hidden');
      document.getElementById('products').classList.add('hidden');
      document.getElementById('account').classList.add('hidden');
      document.getElementById('card').classList.add('hidden');

      document.getElementById(page).classList.remove('hidden');
    }
    
    // Log out function
    function logOut() {
      alert('Logging out...');
      // Redirect to login/signup page
      window.location.reload();
    }
  </script>
</body>
</html>
